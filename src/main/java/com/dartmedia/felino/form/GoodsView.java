package com.dartmedia.felino.form;
import com.dartmedia.felino.gSqlContainer;
import com.dartmedia.felino.fgetsql;
import com.dartmedia.felino.gSqlContainer;
import com.vaadin.cdi.CDIView;
import com.vaadin.data.fieldgroup.BeanFieldGroup;
import org.vaadin.maddon.fields.MTable;
import com.vaadin.event.LayoutEvents;
import org.vaadin.maddon.layouts.MHorizontalLayout;
import com.vaadin.ui.Button;
import com.vaadin.ui.CheckBox;
import com.vaadin.navigator.View;
import com.vaadin.navigator.ViewChangeListener;
import com.vaadin.data.util.sqlcontainer.query.FreeformQuery;
import javax.annotation.PostConstruct;
import org.vaadin.maddon.label.Header;
import org.vaadin.maddon.layouts.MVerticalLayout;
@CDIView("Goods")
public class GoodsView extends MVerticalLayout implements View {
//GoodsSvc data=new GoodsSvc();
    @PostConstruct
    public void initComponent() {
/**Item Reg Date <p:calendar id='fromDate'/> - <p:calendar id='toDate'/>
Inquiry Type <p:selectOneMenu>  
            <f:selectItem itemLabel="REG" itemValue="REG" />  
            <f:selectItem itemLabel="Item Code" itemValue="Item Code" />  
            <f:selectItem itemLabel="Master Code" itemValue="Master Code" />  
			<f:selectItem itemLabel="MD" itemValue="MD" />  
        </p:selectOneMenu> 
<p:inputText />
//REG => select DISTINCT A.INSERT_ID from TGOODS A		
//Item Code => select DISTINCT A.GOODS_CODE from TGOODS A
//Master Code => select DISTINCT A.MASTER_CODE from TGOODS A
//MD => select DISTINCT A.MD_CODE from TGOODS A**/
StringBuffer sb = new StringBuffer();
sb.append("select");
sb.append("/*");
sb.append("goods.xml");
sb.append(":");
sb.append("manage.goods.selectGoods");
sb.append("by");
sb.append("Goods");
sb.append("*/");
sb.append("DISTINCT");
sb.append("A.GOODS_CODE");
sb.append("A.GOODS_NAME");
sb.append("A.LMSD_CODE");
sb.append("A.ENTP_CODE");
sb.append("from");
sb.append("TGOODS");
sb.append("A");
sb.append("where");
sb.append("A.SET_YN");
sb.append("=");
sb.append("'0'");
sb.append("/*");
sb.append("pilih");
sb.append("Item");
sb.append("Code");
sb.append("*/");
sb.append("AND");
sb.append("A.GOODS_CODE");
sb.append("LIKE");
sb.append("''");
sb.append("||");
sb.append("'%'");
sb.append("AND");
sb.append("INSERT_DATE");
sb.append("BETWEEN");
sb.append("TO_DATE('2012-01-01'");
sb.append("'YYYY/MM/DD')");
sb.append("AND");
sb.append("TO_DATE('2014-01-01'");
sb.append("'YYYY/MM/DD')");
sb.append("+");
sb.append("0.99999");
sb.append("/*");
sb.append("pilih");
sb.append("REG");
sb.append("*/");
sb.append("and");
sb.append("A.INSERT_ID");
sb.append("LIKE");
sb.append("''");
sb.append("||");
sb.append("'%'");
sb.append("/*");
sb.append("pilih");
sb.append("Master");
sb.append("Code");
sb.append("*/");
sb.append("and");
sb.append("A.MASTER_CODE");
sb.append("LIKE");
sb.append("''");
sb.append("||");
sb.append("'%'");
sb.append("/*");
sb.append("pilih");
sb.append("MD");
sb.append("*/");
sb.append("and");
sb.append("A.MD_CODE");
sb.append("LIKE");
sb.append("''");
sb.append("||");
sb.append("'%'");
sb.append("order");
sb.append("by");
sb.append("lpad(A.GOODS_CODE");
sb.append("10");
sb.append("'0')");
sb.append("DESC;");
sb.append("select");
sb.append("/*");
sb.append("goods.xml");
sb.append(":");
sb.append("manage.goods.selectGoodsDt1");
sb.append("by");
sb.append("Goods");
sb.append("*/");
sb.append("A.GOODS_CODE");
sb.append("A.GOODS_NAME");
sb.append("A.LGROUP");
sb.append("B.LGROUP_NAME");
sb.append("A.MGROUP");
sb.append("B.MGROUP_NAME");
sb.append("A.SGROUP");
sb.append("B.SGROUP_NAME");
sb.append("A.DGROUP");
sb.append("B.DGROUP_NAME");
sb.append("A.QC_LGROUP");
sb.append("''");
sb.append("QC_LGROUP_NAME");
sb.append("/*Q.QC_LGROUP_NAME");
sb.append("*/");
sb.append("A.QC_MGROUP");
sb.append("''");
sb.append("QC_MGROUP_NAME");
sb.append("/*Q.QC_MGROUP_NAME");
sb.append("*/");
sb.append("A.SALE_GB");
sb.append("A.SIGN_GB");
sb.append("AS");
sb.append("FORM_SIGN_GB");
sb.append("A.ENTP_CODE");
sb.append("C.ENTP_NAME");
sb.append("A.ENTP_MAN_SEQ");
sb.append("I.ENTP_MAN_NAME");
sb.append("AS");
sb.append("ENTP_MAN_SEQ_NAME");
sb.append("A.ACCOUNT_GB");
sb.append("A.MD_CODE");
sb.append("D.MD_NAME");
sb.append("A.KEYWORD");
sb.append("A.BUY_MED");
sb.append("A.DELY_TYPE");
sb.append("A.WH_CODE");
sb.append("A.POST_YN");
sb.append("A.TAX_YN");
sb.append("A.VAT_RATE");
sb.append("A.COST_TAX_YN");
sb.append("A.COST_VAT_RATE");
sb.append("A.MAKECO_CODE");
sb.append("A.ORIGIN_CODE");
sb.append("A.BRAND_CODE");
sb.append("A.HANDLE_CODE");
sb.append("A.MIXPACK_YN");
sb.append("A.DM_YN");
sb.append("A.PACK_BOX");
sb.append("A.SQC_YN");
sb.append("A.SQC_GB");
sb.append("A.SET_YN");
sb.append("A.SET_GOODS_YN");
sb.append("A.GIFT_YN");
sb.append("A.PAY_YN");
sb.append("A.GIFT_RETURN_YN");
sb.append("A.EXCH_YN");
sb.append("A.RETURN_YN");
sb.append("A.AS_YN");
sb.append("A.OUT_STOCK_YN");
sb.append("A.ORDER_MIN_QTY");
sb.append("A.STOCK_CHK_PLACE");
sb.append("A.ORDER_MEDIA_ALL_YN");
sb.append("A.ORDER_MEDIA");
sb.append("FUN_GET_ORDER_MEDIA_NAME('J001'");
sb.append("A.ORDER_MEDIA)");
sb.append("AS");
sb.append("ORDER_MEDIA_NAME");
sb.append("A.ARS_NAME");
sb.append("A.PARENT_GOODS_CODE");
sb.append("A.BASE_GOODS_CODE");
sb.append("A.NOREST_ALLOT_YN");
sb.append("A.NOREST_ALLOT_MONTHS");
sb.append("TO_CHAR(A.INSERT_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("AS");
sb.append("INSERT_DATE");
sb.append("A.INSERT_ID");
sb.append("TO_CHAR(A.MODIFY_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("AS");
sb.append("MODIFY_DATE");
sb.append("A.MODIFY_ID");
sb.append("A.WH_FIX_YN");
sb.append("A.ADVC_REFUND_YN");
sb.append("A.ORDER_MAKE_YN");
sb.append("A.INSTALL_YN");
sb.append("A.DIRECT_SHIP_YN");
sb.append("A.SHIP_MAN_SEQ");
sb.append("I_1.ENTP_MAN_NAME");
sb.append("AS");
sb.append("SHIP_MAN_NAME");
sb.append("(CASE");
sb.append("WHEN");
sb.append("I_1.ENTP_MAN_DDD");
sb.append("IS");
sb.append("NULL");
sb.append("THEN");
sb.append("''");
sb.append("ELSE");
sb.append("I_1.ENTP_MAN_DDD||'-'||I_1.ENTP_MAN_TEL1||'-'||I_1.ENTP_MAN_TEL2");
sb.append("END)");
sb.append("||");
sb.append("(CASE");
sb.append("WHEN");
sb.append("I_1.ENTP_MAN_TEL3");
sb.append("IS");
sb.append("NULL");
sb.append("THEN");
sb.append("''");
sb.append("ELSE");
sb.append("'['||I_1.ENTP_MAN_TEL3||']'");
sb.append("END)");
sb.append("AS");
sb.append("SHIP_MAN_TEL");
sb.append("FUN_ADD_POSTADDR(I_1.POST_NO");
sb.append("I_1.POST_SEQ");
sb.append("I_1.ADDR)");
sb.append("AS");
sb.append("SHIP_MAN_ADDR");
sb.append("A.DIRECT_RETURN_YN");
sb.append("A.RETURN_MAN_SEQ");
sb.append("I_2.ENTP_MAN_NAME");
sb.append("AS");
sb.append("RETURN_MAN_NAME");
sb.append("(CASE");
sb.append("WHEN");
sb.append("I_2.ENTP_MAN_DDD");
sb.append("IS");
sb.append("NULL");
sb.append("THEN");
sb.append("''");
sb.append("ELSE");
sb.append("I_2.ENTP_MAN_DDD||'-'||I_2.ENTP_MAN_TEL1||'-'||I_2.ENTP_MAN_TEL2");
sb.append("END)");
sb.append("||");
sb.append("(CASE");
sb.append("WHEN");
sb.append("I_2.ENTP_MAN_TEL3");
sb.append("IS");
sb.append("NULL");
sb.append("THEN");
sb.append("''");
sb.append("ELSE");
sb.append("'['||I_2.ENTP_MAN_TEL3||']'");
sb.append("END)");
sb.append("AS");
sb.append("RETURN_MAN_TEL");
sb.append("FUN_ADD_POSTADDR(I_2.POST_NO");
sb.append("I_2.POST_SEQ");
sb.append("I_2.ADDR)");
sb.append("AS");
sb.append("RETURN_MAN_ADDR");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("1");
sb.append("1)");
sb.append("as");
sb.append("ifi_1");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("2");
sb.append("1)");
sb.append("as");
sb.append("ifi_2");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("3");
sb.append("1)");
sb.append("as");
sb.append("ifi_3");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("4");
sb.append("1)");
sb.append("as");
sb.append("ifi_4");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("5");
sb.append("1)");
sb.append("as");
sb.append("ifi_5");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("6");
sb.append("1)");
sb.append("as");
sb.append("ifi_6");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("7");
sb.append("1)");
sb.append("as");
sb.append("ifi_7");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("8");
sb.append("1)");
sb.append("as");
sb.append("ifi_8");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("9");
sb.append("1)");
sb.append("as");
sb.append("ifi_9");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("10");
sb.append("1)");
sb.append("as");
sb.append("ifi_10");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("11");
sb.append("1)");
sb.append("as");
sb.append("ifi_11");
sb.append("SUBSTR(A.NOREST_ALLOT_MONTHS");
sb.append("12");
sb.append("1)");
sb.append("as");
sb.append("ifi_12");
sb.append("E.MAKECO_NAME");
sb.append("F.BRAND_NAME");
sb.append("G.CODE_NAME");
sb.append("AS");
sb.append("ORIGIN_NAME");
sb.append("A.CUST_DC_YN");
sb.append("A.SAMPLE_YN");
sb.append("TO_CHAR(A.SALE_START_DATE");
sb.append("'YYYY/MM/DD");
sb.append("HH24:MI:SS')");
sb.append("AS");
sb.append("SALE_START_DATE");
sb.append("A.V_VOLUME");
sb.append("A.MASTER_CODE");
sb.append("H.GOODS_NAME");
sb.append("AS");
sb.append("MASTER_NAME");
sb.append("A.IN_UNIT");
sb.append("A.IN_UNIT_QTY");
sb.append("A.COMMENT_CNT");
sb.append("A.WEIGHT");
sb.append("A.FORM_CODE");
sb.append("AS");
sb.append("FORM_GROUP");
sb.append("J.CSPF_DESC");
sb.append("AS");
sb.append("FORM_GROUP_NAME");
sb.append("A.SIZE_CODE");
sb.append("AS");
sb.append("SIZE_GROUP");
sb.append("K.CSPF_DESC");
sb.append("AS");
sb.append("SIZE_GROUP_NAME");
sb.append("A.DELY_BOX_QTY");
sb.append("NVL(C.TAX_RATE");
sb.append("(SELECT");
sb.append("VAL");
sb.append("FROM");
sb.append("TCONFIG");
sb.append("CF");
sb.append("WHERE");
sb.append("CF.ITEM");
sb.append("=");
sb.append("'DEF_VAT_BUY_RATE'))");
sb.append("AS");
sb.append("DEF_BUY_VAT_RATE");
sb.append("DECODE((SELECT");
sb.append("COUNT(GOODS_CODE)");
sb.append("FROM");
sb.append("TORDERSTOCK");
sb.append("WHERE");
sb.append("GOODS_CODE");
sb.append("=");
sb.append("A.GOODS_CODE");
sb.append("AND");
sb.append("TOT_SALE_QTY");
sb.append(">");
sb.append("0)");
sb.append("0");
sb.append("0");
sb.append("1)");
sb.append("AS");
sb.append("ORDERSTOCK_SALE_QTY");
sb.append("A.WMS_WIDTH");
sb.append("A.WMS_LENGTH");
sb.append("A.WMS_HEIGHT");
sb.append("A.WMS_VOLUME");
sb.append("A.FREE_DELIVERY_YN");
sb.append("from");
sb.append("TGOODS");
sb.append("A");
sb.append("TGOODSKINDS");
sb.append("B");
sb.append("TENTERPRISE");
sb.append("C");
sb.append("TMD");
sb.append("D");
sb.append("/*TQCKINDS");
sb.append("Q");
sb.append("*/");
sb.append("TMAKECOMP");
sb.append("E");
sb.append("TBRAND");
sb.append("F");
sb.append("TCODE");
sb.append("G");
sb.append("TGOODS");
sb.append("H");
sb.append("TENTPUSER");
sb.append("I");
sb.append("TENTPUSER");
sb.append("I_1");
sb.append("TENTPUSER");
sb.append("I_2");
sb.append("TGOODSINFOM");
sb.append("J");
sb.append("TGOODSINFOM");
sb.append("K");
sb.append("where");
sb.append("A.LGROUP");
sb.append("=");
sb.append("B.LGROUP");
sb.append("and");
sb.append("A.MGROUP");
sb.append("=");
sb.append("B.MGROUP");
sb.append("and");
sb.append("A.SGROUP");
sb.append("=");
sb.append("B.SGROUP");
sb.append("and");
sb.append("A.DGROUP");
sb.append("=");
sb.append("B.DGROUP");
sb.append("and");
sb.append("A.ENTP_CODE");
sb.append("=");
sb.append("C.ENTP_CODE");
sb.append("and");
sb.append("A.MD_CODE");
sb.append("=");
sb.append("D.MD_CODE");
sb.append("/*and");
sb.append("A.QC_LGROUP");
sb.append("=");
sb.append("Q.QC_LGROUP(+)");
sb.append("and");
sb.append("A.QC_MGROUP");
sb.append("=");
sb.append("Q.QC_MGROUP(+)*/");
sb.append("and");
sb.append("A.MAKECO_CODE");
sb.append("=");
sb.append("E.MAKECO_CODE");
sb.append("and");
sb.append("A.BRAND_CODE");
sb.append("=");
sb.append("F.BRAND_CODE");
sb.append("and");
sb.append("A.ORIGIN_CODE");
sb.append("=");
sb.append("G.CODE_MGROUP");
sb.append("and");
sb.append("G.CODE_LGROUP");
sb.append("=");
sb.append("'B023'");
sb.append("and");
sb.append("H.GOODS_CODE");
sb.append("=");
sb.append("A.MASTER_CODE");
sb.append("and");
sb.append("A.ENTP_CODE");
sb.append("=");
sb.append("I.ENTP_CODE");
sb.append("and");
sb.append("A.ENTP_MAN_SEQ");
sb.append("=");
sb.append("I.ENTP_MAN_SEQ");
sb.append("and");
sb.append("A.ENTP_CODE");
sb.append("=");
sb.append("I_1.ENTP_CODE(+)");
sb.append("and");
sb.append("A.SHIP_MAN_SEQ");
sb.append("=");
sb.append("I_1.ENTP_MAN_SEQ(+)");
sb.append("and");
sb.append("A.ENTP_CODE");
sb.append("=");
sb.append("I_2.ENTP_CODE(+)");
sb.append("and");
sb.append("A.RETURN_MAN_SEQ");
sb.append("=");
sb.append("I_2.ENTP_MAN_SEQ(+)");
sb.append("and");
sb.append("A.FORM_CODE");
sb.append("=");
sb.append("J.CSPF_GROUP");
sb.append("and");
sb.append("A.SIZE_CODE");
sb.append("=");
sb.append("K.CSPF_GROUP");
sb.append("and");
sb.append("A.GOODS_CODE");
sb.append("=");
sb.append("'104764';");
sb.append("select");
sb.append("/*");
sb.append("goods.xml");
sb.append(":");
sb.append("manage.goods.selectGoodsDt4");
sb.append("by");
sb.append("Goods");
sb.append("*/");
sb.append("A.GOODS_CODE");
sb.append("A.SIGN_SEQ");
sb.append("to_char(A.APPLY_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("as");
sb.append("APPLY_DATE");
sb.append("NVL(A.BUY_PRICE");
sb.append("0)");
sb.append("AS");
sb.append("BUY_PRICE");
sb.append("A.BUY_COST");
sb.append("NVL(A.BUY_VAT");
sb.append("0)");
sb.append("AS");
sb.append("BUY_VAT");
sb.append("A.BUY_VAT_RATE");
sb.append("NVL(A.SALE_PRICE");
sb.append("0)");
sb.append("AS");
sb.append("SALE_PRICE");
sb.append("NVL(A.SALE_VAT");
sb.append("0)");
sb.append("AS");
sb.append("SALE_VAT");
sb.append("A.SALE_VAT_RATE");
sb.append("NVL(A.CUST_PRICE");
sb.append("0)");
sb.append("AS");
sb.append("CUST_PRICE");
sb.append("NVL(A.SAVEAMT_RATE");
sb.append("0)");
sb.append("AS");
sb.append("SAVEAMT_RATE");
sb.append("A.SAVEAMT");
sb.append("A.SIGN_GB");
sb.append("to_char(A.INSERT_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("as");
sb.append("INSERT_DATE");
sb.append("A.INSERT_ID");
sb.append("A.SIGN_NO_CODE");
sb.append("A.SIGN_NO_NOTE");
sb.append("DECODE(CUST_PRICE");
sb.append("0");
sb.append("0");
sb.append("ROUND(((CUST_PRICE-SALE_PRICE)/CUST_PRICE*100)");
sb.append("2))");
sb.append("AS");
sb.append("DC_RATE");
sb.append("DECODE(SALE_PRICE");
sb.append("0");
sb.append("0");
sb.append("ROUND(((SALE_PRICE-SALE_VAT)-(BUY_PRICE-BUY_VAT))/(SALE_PRICE-SALE_VAT)*100");
sb.append("2))");
sb.append("AS");
sb.append("MARGIN_RATE");
sb.append("DECODE(SALE_PRICE");
sb.append("0");
sb.append("0");
sb.append("FUN_REVISE_AMT(SALE_PRICE-SALE_VAT");
sb.append("'V'))");
sb.append("AS");
sb.append("SALE_REAL_PRICE");
sb.append("from");
sb.append("TGOODSSIGN");
sb.append("A");
sb.append("TGOODS");
sb.append("B");
sb.append("where");
sb.append("A.GOODS_CODE");
sb.append("=");
sb.append("B.GOODS_CODE");
sb.append("and");
sb.append("B.GOODS_CODE");
sb.append("=");
sb.append("'104764';");
sb.append("select");
sb.append("/*");
sb.append("goods.xml");
sb.append(":");
sb.append("manage.goods.selectGoodsDt5");
sb.append("by");
sb.append("Goods");
sb.append("*/");
sb.append("A.GOODS_CODE");
sb.append("A.GOODS_NAME");
sb.append("A.GOODSDT_CODE");
sb.append("A.BARCODE");
sb.append("A.COLOR_CODE");
sb.append("A.COLOR_NAME");
sb.append("A.COLOR_NAME");
sb.append("COMP_COLOR_NAME");
sb.append("A.SIZE_CODE");
sb.append("A.SIZE_NAME");
sb.append("A.SIZE_NAME");
sb.append("COMP_SIZE_NAME");
sb.append("A.PATTERN_CODE");
sb.append("A.PATTERN_NAME");
sb.append("A.PATTERN_NAME");
sb.append("COMP_PATTERN_NAME");
sb.append("A.FORM_CODE");
sb.append("A.FORM_NAME");
sb.append("A.FORM_NAME");
sb.append("COMP_FORM_NAME");
sb.append("A.OTHER_TEXT");
sb.append("A.GOODSDT_INFO");
sb.append("A.SALE_GB");
sb.append("to_char(A.INSERT_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("as");
sb.append("INSERT_DATE");
sb.append("A.INSERT_ID");
sb.append("to_char(A.MODIFY_DATE");
sb.append("'YYYY/MM/DD')");
sb.append("as");
sb.append("MODIFY_DATE");
sb.append("A.MODIFY_ID");
sb.append("from");
sb.append("TGOODSDT");
sb.append("A");
sb.append("where");
sb.append("A.GOODSDT_CODE");
sb.append(">");
sb.append("'000'");
sb.append("and");
sb.append("A.GOODS_CODE");
sb.append("=");
sb.append("'104764';");
//String fsql = data.makeSql();
gSqlContainer sumber=new gSqlContainer();
MTable table=new MTable();
MHorizontalLayout toolbar = new MHorizontalLayout();
toolbar.addComponent(new CheckBox("Indv.Query"));
//TabSheet tabsheet = new TabSheet();
//-------------------- Header  ------------------------------
//-toolbar.addComponent(new PopupDateField("My Date"));
//-toolbar.addComponent(new TextField("Indv.Query"));
//-toolbar.addComponent(new ComboBox("My ComboBox"));
//-toolbar.addComponent(new Button("My ComboBox"));
//-------------------- Header  ------------------------------
//-------------------- Header Table ---judul untuk table----------
table.addContainerProperty("No", String.class,  null);
table.addContainerProperty("ITEM Code", String.class,  null);
table.addContainerProperty("Item Name", String.class,  null);
//-------------------- Header Table ------------------------------ 
MHorizontalLayout toolmenu;
toolmenu = new MHorizontalLayout();
toolmenu.addComponent(new Button("Ret"));
toolmenu.addComponent(new Button("Ins"));
toolmenu.addComponent(new Button("Save"));
toolmenu.addComponent(new Button("Print"));
toolmenu.addComponent(new Button("XLS"));
        addComponents( 
                new Header("Goods")
        );
        addComponents(toolmenu);
        addComponents(toolbar); 
        addComponents(table);   
        addLayoutClickListener(new LayoutEvents.LayoutClickListener() {
            @Override
            public void layoutClick(LayoutEvents.LayoutClickEvent event) {
            }
        });
    }
    @Override
    public void enter(ViewChangeListener.ViewChangeEvent event) {
    }
}
